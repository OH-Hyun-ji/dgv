<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="UserMovieDAO">

	<select id="TheaterList" resultType="AdminCityVO">
		SELECT * FROM dgv_city_info 
	</select>
	
	<select id="TheaterCodeList" resultType="AdminTheaterVO" parameterType="int">
		SELECT * FROM movie_theater WHERE region_code =#{region_code}
	</select>
	
	<select id="RegionList" resultType="AdminRegionVO" parameterType="int">
		SELECT * FROM dgv_region_info WHERE city_code=#{city_code}
	</select>
	
	<select id="MapList" resultType="UserMapVO" parameterType="int">
		SELECT * FROM movie_map WHERE region_code=#{region_code}
	</select>
	
	<insert id="InsertMap" parameterType="UserMapVO">
		INSERT INTO movie_map(map_code,map_x,map_y,map_address,map_name,region_code)
		VALUES(DEFAULT,#{map_x},#{map_y},#{map_address},#{map_name},#{region_code})
	</insert>
	
	<select id="timeStatusList" resultType="AdminTimeVO" parameterType="int">
		SELECT * FROM movie_time WHERE theater_code =#{theater_code}
	</select>
	
	<select id="seatListInfo" resultType="AdminSeatVO" parameterType="int">
		SELECT * FROM movie_seat WHERE theater_code =#{theater_code}	
	</select>
	
	<select id="MovieList" resultType="AdminMovieVO">
		SELECT * FROM movie_info WHERE movie_num=#{movie_num}
	</select>
	
	<select id="theaterListInfo" resultType="AdminTheaterVO">
		SELECT * FROM movie_theater WHERE theater_code =#{theater_code}
	</select>
	<select id="parList" resultType="AdminParVO" parameterType="int">
		SELECT * FROM movie_par WHERE movie_num=#{movie_num}
	</select>
	<select id="distinctGroupList" resultType="AdminParVO" parameterType="int">
		SELECT DISTINCT movie_group_code FROM movie_par WHERE movie_num =#{movie_num}
	</select>
	
	<select id="actorList" resultType="AdminActorVO" parameterType="int" >
		SELECT * FROM movie_actor WHERE movie_actor_code=#{movie_actor_code}
	</select>
	
	<select id="groupList" resultType="AdminGroupVO" parameterType="int">
		SELECT * FROM movie_group WHERE movie_group_code =#{movie_group_code}
	</select>
	
	<select id="imgList" resultType="UserMoiveImgVO"  parameterType="int">
		SELECT * FROM movie_img WHERE movie_num =#{movie_num}
	</select>
	
	<select id="actorMovieList" resultType="AdminParVO">
		SELECT *FROM movie_par WHERE movie_actor_code=#{movie_actor_code}
	</select>
	
	<select id="actorParMovieList" resultType="AdminMovieVO">
		SELECT * FROM movie_info WHERE movie_num =#{movie_num}
	</select>
	<select id="actorGenreList" resultType="AdminGenreVO">
		SELECT * FROM movie_genre_info WHERE movie_genre_code=#{movie_genre_code}
	</select>
	<select id="actorAgeList" resultType="AdminAgeVO">
		SELECT * FROM movie_age_info WHERE movie_age_num=#{movie_age_num}
	</select>
	
	<insert id="userReserveInsert" parameterType="UserReserveVO" >
		INSERT INTO movie_reserve(reserve_code,movie_num,region_code,reserve_date,movie_time_start,theater_code,seat_reservation,
		reserve_basic,reserve_student,reserve_old,reserve_price,user_id,reserve_imp_uid,reserve_apply_num,reserve_merchant_uid,reserve_method)
		VALUES(DEFAULT,#{movie_num},#{region_code},current_date,#{movie_time_start},#{theater_code},#{seat_reservation},
		#{reserve_basic},#{reserve_student},#{reserve_old},#{reserve_price},#{user_id},#{reserve_imp_uid},#{reserve_apply_num},#{reserve_merchant_uid},#{reserve_method})
		
	</insert>
	
</mapper>